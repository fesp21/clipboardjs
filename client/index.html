<body>
<div class="app">
    <div class="container-fluid">
        <div class="row-fluid">
            <div id="content" class="content">
                {{> user}}
                {{> create}}
                {{> message_view}}
                {{> stream}}
                {{> stream_list}}
                {{> join_stream}}
            </div>
            <div id="sidebar" class="sidebar">
                <div class="lists">{{> list}}</div>
                <footer>ClipboardJS, powered by <a href="http://meteor.com">meteor</a>, sources on <a
                        href="https://github.com/grmlin/clipboardjs">github</a></footer>
            </div>
        </div>
    </div>
</div>
{{> blocker}}
</body>

<template name="navigation">
    <ul class="nav">
        <li{{#if is_active}} class="active"{{/if}}><a href="/list" class="internal-link"><i class="icon-edit icon-white"></i>
        Paste</a></li>
    </ul>
</template>
<template name="user">
    {{#if show}}
    {{#with user}}
    <div class="user pull-right btn-group">
        <a class="user-drop btn btn-small {{#if is_registered}}btn-success{{else}}btn-warning{{/if}}" href="user-actions"><i class="icon-user icon-white"></i> {{user_name}}</a>
        <a class="user-drop btn btn-small {{#if is_registered}}btn-success{{else}}btn-warning{{/if}} dropdown-toggle" data-toggle="dropdown" href="user-actions"><span class="caret"></span></a>
        <ul id="user-actions" class="dropdown-menu">
            {{#if is_registered}}
            <li><a href="#" class="logout" title="Logout"><i class="icon-off"></i> Logout</a></li>
            {{else}}
            <li><a href="#" class="login" title="Login"><i class="icon-lock"></i> Login</a></li>
            <li class="divider"></li>
            <li><a href="#" class="create" title="Register"><i class="icon-user"></i> Register</a></li>
            {{/if}}
        </ul>
    </div>
    {{/with}}
    {{/if}}
</template>
<template name="list">
    <h1 id="logo">ClipboardJS</h1>

    {{#if show}}
    <ul class="nav nav-list">
        <li class="nav-header">Pastes <span class="label">{{message_count}}</span> <a href="/list" class="internal-link btn btn-mini pull-right" title="Paste something"><i
                class="icon-plus"></i></a></li>
    </ul>
    <ul class="nav nav-list messages-list">
        {{#each messages}}
        {{> message_abstr}}
        {{/each}}
    </ul>
    <ul class="nav nav-list">
        <li class="nav-header">Paste Streams <span class="label">{{stream_count}}</span> <a href="#" class="new-stream btn btn-mini pull-right" title="Create a stream"><i
                class="icon-plus"></i></a></li>
    </ul>
    
    <ul class="nav nav-list messages-list">
        {{#each streams}}
        {{> stream_abstr}}
        {{/each}}
        <li class="nav-header">Bookmarks <span class="label">{{bookmark_count}}</span></li>
    </ul>
    <ul class="nav nav-list messages-list">
        {{#each bookmarked_messages}}
        {{> message_bookmarked_abstr}}
        {{/each}}
    </ul>
    {{/if}}
</template>

<template name="message_abstr">
    <li {{#if is_active short_id}} class="active"{{/if}}>
    <a href="/message/{{short_id}}" 
       class="message-link internal-link">
        <span class="message-abstr">{{{abstract}}}</span>
    </a>
    <div class="popover message-abstract bottom">
        <div class="arrow"></div>
        <h6 class="popover-title"><i class='icon-user'></i> {{user_name}}<span class="pull-right">{{get_date time}}</span></h6>
        <div class="popover-content">
            <pre><code class='{{language}}'>{{{abstract}}}</code></pre>
        </div>
    </div>
    </li>
</template>
<template name="message_bookmarked_abstr">
    <li {{#if is_active short_id}} class="active"{{/if}}>
    <a href="/message/{{short_id}}"
       class="message-link internal-link">
        <span class="message-abstr">{{{abstract}}}</span>
    </a>
    <div class="popover message-abstract bottom">
        <div class="arrow"></div>
        <h3 class="popover-title"><i class='icon-user'></i> {{user_name}}</h3>
        <div class="popover-content">
            <p><pre><code class='{{language}}'>{{{abstract}}}</code></pre></p>
        </div>
    </div>
    </li>
</template>
<template name="stream_abstr">
    <li {{#if is_active short_id}} class="active"{{/if}}>
    <a href="/stream/{{short_id}}"
       class="internal-link">
        <span class="message-abstr">Stream</span>
    </a>
    </li>
</template>

<template name="create">
    {{#if show}}
    <div class="show">
        <input type="hidden" name="current-lang-notepad" value="plain">
        <div class="clearfix">
            <div class="text-type pull-left btn-group">
                {{> language_btn_group}}
            </div>
            <p class="pull-left">
                <button class="preview show-preview btn btn-small" title="Show Preview" data-placement="bottom"><i class="icon-screenshot"></i></button>
                <button class="preview hide-preview btn btn-small btn-success" title="Close Preview" data-placement="bottom"><i class="icon-screenshot icon-white"></i></button>
            </p>
        </div>
        <p></p>
        <div>
                <div class="text-board-wrapper">
                    <div class="message-view">
                        <p class="message-detail">
                            <span class="lang current-lang">Plain text</span>
                            <span class="lang current-computed-lang"></span>
                        </p>
                        <pre class="prettyprint"><p class="text-board" id="text-content" contenteditable="true"></p><code class="plain"></code></pre>
                    </div>
                </div>
                <p>
                    <button class=" btn btn-large btn-block paste-text-board"><strong>Save Snippet</strong></button>
                </p>
        </div>
    </div>
    </div>
    {{/if}}
</template>

<template name="message_view">
    {{#if show}}
    {{#with message}}
    <div class="clearfix">
        <p class="message-actions pull-left btn-group">
            {{#if is_bookmarked _id}}
            <button class="remove-bookmark btn btn-small btn-info collapsing-btn" title="remove bookmark" data-placement="bottom" data-original-title="remove bookmark"><i class="icon-bookmark icon-white"></i></button>
            {{else}}
            <button class="add-bookmark btn btn-small collapsing-btn" title="add bookmark" data-placement="bottom" data-original-title="add bookmark"><i class="icon-bookmark"></i></button>
            {{/if}}
            <button class="share btn btn-small collapsing-btn" title="share message" data-placement="bottom" data-original-title="share message"><i class="icon-share"></i></button>
            <button class="raw btn btn-small collapsing-btn" title="show raw message" data-placement="bottom" data-original-title="show raw message"><i class="icon-align-justify"></i></button>
        </p>
    </div>
    {{/with}}
    {{#constant}}
    <div class="message-view loading">
        <pre class="prettyprint"><code></code></pre>
    </div>
    {{/constant}}
    {{/if}}
</template>
<template name="message_detail">
    <p class="message-detail">
        <span class="lang">{{language}}</span></span>
    </p>
    <p class="author-detail">
        <span class="lang"><span class="">{{user_name}}</span>
    </p>
    <pre class="prettyprint"><code class={{language}}>{{{highlighted}}}</code></pre>
</template>
<template name="message_detail_unavailable">
    <div class="alert alert-block">
        <h4>:(</h4>

        <p>The message you requested is unavailable</p>
    </div>
</template>
    
<template name="message_raw">
    <div class="raw-file">
        <button class="close">&times;</button>
        <textarea>{{message}}</textarea>
    </div>
</template>
<template name="stream">
    {{#if show}}
    <div id="stream">
        <div class="clearfix">
            <p class="stream-actions pull-left btn-group">
                <button class="share btn btn-small collapsing-btn" title="share this stream" data-placement="bottom" data-original-title="share message"><i class="icon-share"></i></button>
                <button class="remove btn btn-small btn-warning collapsing-btn" title="remove this stream" data-placement="bottom" data-original-title="leave stream"><i class="icon-remove-sign"></i></button>
            </p>
        </div>
        {{#constant}}
        <div class="stream-editor">
            <div class="editor-actions pull-right">
                <p class="btn-group dropup">
                    {{> language_btn_group}}
                </p>
                <p><button class="paste btn btn-small btn-block">Paste</button></p>
            </div>
            <div class="paste-area"><textarea name="stream-message" id="stream-message"></textarea></div>            
        </div>
        {{/constant}}
    </div>
    {{/if}}
</template>
<template name="stream_list">
    {{#if show}}
    <div id="stream-list-wrapper">
        <ul id="stream-list"></ul>
    </div>    
    {{/if}}
</template>
        
<template name="join_stream">
    {{#if show}}
    <div class="join-stream">
        <p><strong>You're currently not subscribed to this paste stream.</strong></p>
        <p><button class="btn btn-large">Join Stream</button></p>
    </div>
    {{/if}}
</template>
        
<template name="blocker">
    {{#if block}}
    <div class="blocker">
        <div></div>
    </div>
    {{/if}}
</template>


<template name="share_message_modal">
    <div class="modal share-message hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Permalink to this message</h3>
        </div>
        <div class="modal-body">
            <input type="text" value="{{url}}">
        </div>
    </div>
</template>
<template name="user_create_modal">
    <div class="modal hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>{{title}}</h3>
        </div>
        <form class="form-horizontal">
            <div class="modal-body">
                <div class="control-group username">
                    <label class="control-label" for="username">Username</label>

                    <div class="controls">
                        <input type="text" id="username" name="username" value="{{user_name}}">
                        <span class="help-block">Select a unique username with at least 4 characters</span>
                    </div>
                </div>
                <div class="control-group pwd">
                    <label class="control-label" for="pwd">Your password</label>

                    <div class="controls">
                        <input type="password" id="pwd" name="pwd">
                        <span class="help-block">Add a password with at least 6 characters</span>
                    </div>
                </div>
            </div>
        </form>
        <div class="modal-footer">
            <button class="btn cancel">Close</button>
            <button class="btn btn-primary save">{{submit_text}}</button>
        </div>
    </div>
</template>     
        
<template name="language_btn_group">
    <button class="current-lang btn btn-small btn-info" data-toggle="dropdown">Plain Text</button>
    <button class="language-toggle btn btn-small btn-info dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li class="active"><a href="#" data-val="plain">Plain text</a></li>
        <li><a href="#" data-val="auto">Auto Detection</a></li>
        <li><a href="#" data-val="html">HTML</a></li>
        <li><a href="#" data-val="javascript">Javascript</a></li>
        <li><a href="#" data-val="coffeescript">Coffeescript</a></li>
    </ul>
</template>