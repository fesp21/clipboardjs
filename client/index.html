<body>
<div class="app">
    <div class="container-fluid">
        <div class="row-fluid">
            <div id="content" class="content">
                {{> user}}
                {{> create}}
                {{> message_view}}
                {{> stream}}
                {{> stream_list}}
                {{> join_stream}}
            </div>
            <div id="sidebar" class="sidebar">
                <div class="lists">{{> list}}</div>
                <footer>ClipboardJS, powered by <a href="http://meteor.com">meteor</a>, sources on <a
                        href="https://github.com/grmlin/clipboardjs">github</a></footer>
            </div>
        </div>
    </div>
</div>
{{> blocker}}
</body>

<template name="user">
    {{#if show}}
    {{#with user}}
    <div class="user pull-right btn-group">
        <a class="user-drop btn btn-small {{#if is_registered}}btn-success{{else}}btn-warning{{/if}}" href="user-actions"><i class="icon-user icon-white"></i> {{user_name}}</a>
        <a class="user-drop btn btn-small {{#if is_registered}}btn-success{{else}}btn-warning{{/if}} dropdown-toggle" data-toggle="dropdown" href="user-actions"><span class="caret"></span></a>
        <ul id="user-actions" class="dropdown-menu">
            {{#if is_registered}}
            <li><a href="#" class="logout" title="Logout"><i class="icon-off"></i> Logout</a></li>
            {{else}}
            <li><a href="#" class="login" title="Login"><i class="icon-lock"></i> Login</a></li>
            <li class="divider"></li>
            <li><a href="#" class="create" title="Register"><i class="icon-user"></i> Register</a></li>
            {{/if}}
        </ul>
    </div>
    {{/with}}
    {{/if}}
</template>
<template name="list">
    <h1 id="logo">ClipboardJS</h1>

    {{#if show}}
    <ul class="nav nav-list">
        <li class="nav-header">Pastes <span class="label">{{message_count}}</span> <a href="/list" class="internal-link btn btn-mini pull-right" title="Paste something"><i
                class="icon-plus"></i></a></li>
    </ul>
    <ul class="nav nav-list messages-list">
        {{#each messages}}
        {{> message_abstr}}
        {{/each}}
    </ul>
    <ul class="nav nav-list">
        <li class="nav-header">Paste Streams <span class="label">{{stream_count}}</span> <a href="#" class="new-stream btn btn-mini pull-right" title="Create a stream"><i
                class="icon-plus"></i></a></li>
    </ul>
    
    <ul class="nav nav-list messages-list">
        {{#each streams}}
        {{> stream_abstr}}
        {{/each}}
        <li class="nav-header">Bookmarks <span class="label">{{bookmark_count}}</span></li>
    </ul>
    <ul class="nav nav-list messages-list">
        {{#each bookmarked_messages}}
        {{> message_bookmarked_abstr}}
        {{/each}}
    </ul>
    {{/if}}
</template>

<template name="message_abstr">
    <li {{#if is_active short_id}} class="active"{{/if}}>
    <a href="/message/{{short_id}}" 
       class="message-link internal-link">
        <span class="message-abstr">{{{abstract}}}</span>
    </a>
    <div class="popover message-abstract bottom">
        <div class="arrow"></div>
        <h6 class="popover-title"><i class='icon-user'></i> {{user_name}}<span class="pull-right">{{get_date time}}</span></h6>
        <div class="popover-content">
            <pre><code class='{{language}}'>{{{abstract}}}</code></pre>
        </div>
    </div>
    </li>
</template>
<template name="message_bookmarked_abstr">
    <li {{#if is_active short_id}} class="active"{{/if}}>
    <a href="/message/{{short_id}}"
       class="message-link internal-link">
        <span class="message-abstr">{{{abstract}}}</span>
    </a>
    <div class="popover message-abstract bottom">
        <div class="arrow"></div>
        <h3 class="popover-title"><i class='icon-user'></i> {{user_name}}</h3>
        <div class="popover-content">
            <p><pre><code class='{{language}}'>{{{abstract}}}</code></pre></p>
        </div>
    </div>
    </li>
</template>
<template name="stream_abstr">
    <li {{#if is_active short_id}} class="active"{{/if}}>
    <a href="/stream/{{short_id}}"
       class="internal-link">
        <span class="message-abstr">Stream</span>
    </a>
    </li>
</template>


<template name="blocker">
    {{#if block}}
    <div class="blocker">
        <div></div>
    </div>
    {{/if}}
</template>


<template name="share_message_modal">
    <div class="modal share-message hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Permalink to this message</h3>
        </div>
        <div class="modal-body">
            <input type="text" value="{{url}}">
        </div>
    </div>
</template>
<template name="user_create_modal">
    <div class="modal hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>{{title}}</h3>
        </div>
        <form class="form-horizontal">
            <div class="modal-body">
                <div class="control-group username">
                    <label class="control-label" for="username">Username</label>

                    <div class="controls">
                        <input type="text" id="username" name="username" value="{{user_name}}">
                        <span class="help-block">Select a unique username with at least 4 characters</span>
                    </div>
                </div>
                <div class="control-group pwd">
                    <label class="control-label" for="pwd">Your password</label>

                    <div class="controls">
                        <input type="password" id="pwd" name="pwd">
                        <span class="help-block">Add a password with at least 6 characters</span>
                    </div>
                </div>
            </div>
        </form>
        <div class="modal-footer">
            <button class="btn cancel">Close</button>
            <button class="btn btn-primary save">{{submit_text}}</button>
        </div>
    </div>
</template>     
        
<template name="language_btn_group">
    <button class="current-lang btn btn-small btn-info" data-toggle="dropdown">Plain Text</button>
    <button class="language-toggle btn btn-small btn-info dropdown-toggle" data-toggle="dropdown">
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li class="active"><a href="#" data-val="plain">Plain text</a></li>
        <li><a href="#" data-val="auto">Auto Detection</a></li>
        <li><a href="#" data-val="html">HTML</a></li>
        <li><a href="#" data-val="javascript">Javascript</a></li>
        <li><a href="#" data-val="coffeescript">Coffeescript</a></li>
    </ul>
</template>