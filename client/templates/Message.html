<template name="message_view">
    {{#if show}}
    {{#with message}}
    <div class="clearfix view-toolbar">
        <p class="message-actions pull-left btn-group">
            {{#if is_bookmarked _id}}
            <button class="remove-bookmark btn btn-small btn-info collapsing-btn" title="remove bookmark" data-placement="bottom" data-original-title="remove bookmark"><i class="icon-bookmark icon-white"></i></button>
            {{else}}
            <button class="add-bookmark btn btn-small collapsing-btn" title="add bookmark" data-placement="bottom" data-original-title="add bookmark"><i class="icon-bookmark"></i></button>
            {{/if}}
            <button class="edit btn btn-small collapsing-btn" title="edit message" data-placement="bottom" data-original-title="edit message"><i class="icon-pencil"></i></button>
            <button class="share btn btn-small collapsing-btn" title="share message" data-placement="bottom" data-original-title="share message"><i class="icon-share"></i></button>
            <button class="raw btn btn-small collapsing-btn" title="show raw message" data-placement="bottom" data-original-title="show raw message"><i class="icon-align-justify"></i></button>
        </p>
    </div>
    {{/with}}
    <div class="message-editor clearfix">
        <div class="pull-left">
            <h6>Change language</h6>
            <p class="btn-group">{{> language_btn_group}}</p>
        </div>
        <div class="pull-left">
            <h6>Select text and add annotations</h6>
            <p class="btn-group pull-left">
                <button class="add-annotation btn btn-small"><i class="icon-plus-sign"></i> add annotation</button>
                <button class="delete-annotation btn btn-small btn-warning" disabled="disabled"><i class="icon-trash icon-white"></i> delete annotation</button>
            </p>
        </div>
    </div>
    {{#constant}}
    <div class="message-view loading">
        <pre class="prettyprint"><code></code></pre>
    </div>
    {{/constant}}
    {{/if}}
</template>
<template name="message_detail">
    <p class="message-detail">
        <span class="lang">{{language}}</span></span>
    </p>
    <p class="author-detail">
        <span class="lang">{{user_name}}</span>
    </p>
    <pre class="prettyprint"><code class="code-annotated">{{{annotated this}}}</code><code class="code-view {{language}}">{{{highlighted}}}</code><code class="code-raw">{{{raw}}}</code></pre>
</template>
<template name="message_detail_unavailable">
    <div class="alert alert-block">
        <h4>:(</h4>

        <p>The message you requested is unavailable</p>
    </div>
</template>

<template name="message_raw">
    <div class="raw-file">
        <button class="close">&times;</button>
        <textarea>{{message}}</textarea>
    </div>
</template>